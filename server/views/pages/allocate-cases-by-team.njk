{% extends "partials/layout.njk" %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set tableRows = [] %}
{% for team in teams %}
    {{ tableRows.push(
      [
      {
        text: team.teamName
      },
      {
        text: team.workload
      },
      {
        text: team.caseCount
      },
      {
        html: '<a class="govuk-link--no-visited-state" href="/team/' + team.teamCode + '/cases/unallocated" data-qa-link="' + team.teamCode +'">View unallocated cases (' + team.unallocatedCaseCount  + ')</a>'
      }
    ]) 
    }}
{% endfor %}

{% block content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <span class="govuk-caption-xl">Wales</span>
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-2">North Wales</h1>
        <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">
    </div>    
</div>

{{ govukTable({
  caption: "Your teams",
  captionClasses: "govuk-table__caption--l",
  firstCellIsHeader: true,
  head: [
    {
      text: "Name"
    },
    {
      text: "Workload"
    },
    {
      text: "Cases"
    },
    {
      text: "Action"
    }
  ],
  rows: tableRows
  }) 
}}

<p class="govuk-!-margin-bottom-9">You can add and remove teams by <a class="govuk-link--no-visited-state" href="/probationDeliveryUnit/{{pduCode}}/select-teams" data-qa-link="edit-teams">editing your team list</a>.</p>

{% endblock %}